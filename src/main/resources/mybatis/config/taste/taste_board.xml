<?xml version="1.0" encoding="UTF-8"?>
<!-- Sql Mapper -->
<!DOCTYPE mapper
PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="tasteBoard">
	<resultMap type="article" id="articleRM">
		<result property="articleNo" column="article_no"/>
		<result property="regDate" column="reg_date"/>
	</resultMap>
	<sql id="getArticle">
		select article_no,location,writer,title,contents,
		to_char(reg_date,'YYYY-MM-DD HH24:MI:SS')as reg_date,
		good,bad,hits from taste_board
	</sql>
	<select id="getTotalCount" resultType="int">
		select count(*) from taste_board
	</select>
	<select id="getDynamicTotalCount" resultType="int">
		select count(*) from taste_board
		<where>
			<if test="location!=null and location!=''">
				location=#{location}
			</if>
		</where>
	</select>
	<insert id="insertArticle">
		<selectKey keyProperty="articleNo" keyColumn="article_no" resultType="int" order="BEFORE">
			select taste_board_sequence.nextval from dual
		</selectKey>
		insert into taste_board(article_no,location,writer,title,contents)
		values(taste_board_sequence.currval,#{location},#{writer},#{title},#{contents})
	</insert>
	<select id="getArticleById" resultMap="articleRM">
		<include refid="getArticle"/> where article_no=#{articleNo}
	</select>
	<select id="getArticles" resultMap="articleRM">
		select * from 
		(select rownum,t.* from taste_board t order by article_no desc) 
		where rownum between #{beginRow} and #{endRow}
	</select>
	<select id="getArticlesByLocation" resultMap="articleRM">
		select * from 
		(select rownum,t.* from taste_board t where location=#{location} order by article_no desc) 
		where rownum between #{beginRow} and #{endRow}
	</select>
</mapper>
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
















